---
const {
  title = '',
  oneLiner = '',
  keyResults = [],
  situation = '',
  intervention = [],
  playbook = [],
} = Astro.props as {
  title: string;
  oneLiner: string;
  keyResults: string[];
  situation: string;
  intervention: string[];
  playbook: string[];
};
---

<article class="rounded-lg border border-neutral-200 bg-white/80">
	<div class="px-4 py-4 md:px-6 md:py-6">
		<!-- Summary View -->
		<header class="space-y-2">
			<h3 class="text-lg md:text-xl font-semibold tracking-tight">{title}</h3>
			<p class="text-neutral-700">{oneLiner}</p>
			{keyResults?.length > 0 && (
				<ul class="mt-3 list-disc pl-5 space-y-1 text-neutral-800">
					{keyResults.map((item) => <li>{item}</li>)}
				</ul>
			)}
		</header>

		<!-- Disclosure View (native details/summary) -->
		<details class="mt-6 group cs-disclosure">
			<summary class="w-full cursor-pointer inline-flex items-center rounded-md border border-neutral-300 bg-white px-3 py-1.5 text-sm text-slate-900 hover:bg-neutral-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-neutral-300 select-none">
				<span class="group-open:inline hidden">[-] Hide the Playbook</span>
				<span class="group-open:hidden inline">[+] Show the Playbook</span>
			</summary>

			<div class="mt-6 space-y-6 text-neutral-800">
				<div>
					<h4 class="text-base md:text-lg font-medium">The Situation</h4>
					<p class="mt-2">{situation}</p>
				</div>
				<div>
					<h4 class="text-base md:text-lg font-medium">My Intervention</h4>
					{intervention?.length > 0 && (
						<ol class="mt-2 list-decimal pl-5 space-y-1">
							{intervention.map((step) => <li>{step}</li>)}
						</ol>
					)}
				</div>
				<div>
					<h4 class="text-base md:text-lg font-medium">My Repeatable Playbook</h4>
					{playbook?.length > 0 && (
						<ol class="mt-2 list-decimal pl-5 space-y-1">
							{playbook.map((step) => <li>{step}</li>)}
						</ol>
					)}
				</div>
			</div>
		</details>
	</div>
</article>

<style>
	/* Hide default marker only within this component */
	.cs-disclosure summary::-webkit-details-marker {
		display: none;
	}
</style>


